<div class="main-container">
  <div class="container-block">
    <h3>Новый пользователь</h3>
    <div class="img-del" *ngIf="userID">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
           data-name="Layer 1" viewBox="0 0 24 24"
           (click)="openDelTemplate()"
           *ngIf="!isDelete"
      >
        <path d="M17 4V2a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H2v2h2v15a3 3 0 0 0 3 3h10a3
         3 0 0 0 3-3V6h2V4Zm-6 13H9v-6h2Zm4 0h-2v-6h2Zm0-13H9V2h6Z" fill="white"/>
      </svg>
    </div>
    <form [formGroup]="form">

      <div class="container-form">
        <div class="container-left">
          <div class="row">
            <div class="input-field col s6">
              <label class="active" for="lastName">*Фамилия</label>
              <input id="lastName" type="text" formControlName="lastName"
                     [ngClass]="{'invalid' : form.get('lastName').invalid && form.get('lastName').touched}"
              >
            </div>
          </div>
          <span class="error" *ngIf="form.get('lastName').hasError('required') && form.get('lastName').touched"
          >*Введите фамилию
                    </span>
          <span class="error" *ngIf="form.get('lastName').hasError('minlength') && form.get('lastName').touched"
          >*Не менее 3х символов
                    </span>
          <span class="error" *ngIf="form.get('lastName').hasError('maxlength') && form.get('lastName').touched"
          >*Слишком длинная фамилия
                    </span>

          <div class="row">
            <div class="input-field col s6">
              <label class="active" for="firstName">*Имя</label>
              <input id="firstName" type="text" formControlName="firstName"
                     [ngClass]="{'invalid' : form.get('firstName').invalid && form.get('firstName').touched}"
              >
            </div>
          </div>
          <span class="error" *ngIf="form.get('firstName').hasError('required') && form.get('firstName').touched"
          >*Введите имя
                    </span>
          <span class="error" *ngIf="form.get('firstName').hasError('minlength') && form.get('firstName').touched"
          >*Не менее 3х символов
                    </span>
          <span class="error" *ngIf="form.get('firstName').hasError('maxlength') && form.get('firstName').touched"
          >*Слишком длинное имя
                    </span>

          <div class="row">
            <div class="input-field col s6">
              <label class="active" for="email">Email</label>
              <input id="email" type="text" formControlName="email"
                     [ngClass]="{'invalid' : form.get('email').invalid && form.get('email').touched}"
              >
            </div>
          </div>
          <span class="error" *ngIf="form.get('email').hasError('email') && form.get('email').touched"
          >*Неверный формат
        </span>

          <div class="row">
            <div class="input-field col s6">
              <label class="active" for="phone">*Телефон</label>
              <input id="phone" type="number" formControlName="phone"
                     [ngClass]="{'invalid' : form.get('phone').invalid && form.get('phone').touched}"
              >
            </div>
          </div>
          <span class="error" *ngIf="form.get('phone').hasError('required') && form.get('phone').touched"
          >*Введите телефон
                    </span>
          <span class="error" *ngIf="(form.get('phone').hasError('pattern') ||
        !(form.get('phone').value.toString().charAt(0) == '7')) && form.get('phone').touched"
          >*Укажите в формате 79XX ... .. ..
                    </span>

          <mat-form-field>
            <mat-label>Заведение <span *ngIf="!restaurants.length">(список пуст)</span></mat-label>
            <mat-select formControlName="restaurant">
              <mat-select-trigger>
                {{ form.get('restaurant').value | filterRestaurant : restaurants }}
              </mat-select-trigger>
              <mat-option *ngFor="let restaurant of restaurants"
                          [value]="restaurant._id"
              >{{ restaurant.title }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="container-right">

          <div class="row">
            <div class="input-field col s6">
              <label class="active" for="login">*Логин</label>
              <input id="login" type="text" formControlName="login"
                     [ngClass]="{'invalid' : form.get('login').invalid && form.get('login').touched}"
              >
            </div>
          </div>
          <span class="error" *ngIf="form.get('login').hasError('required') && form.get('login').touched"
          >*Придумайте логин
                    </span>
          <span class="error" *ngIf="form.get('login').hasError('minlength') && form.get('login').touched"
          >*Не менее 3 символов
                    </span>
          <span class="error" *ngIf="form.get('login').hasError('maxlength') && form.get('login').touched"
          >*Не более 10 символов
                    </span>


          <div class="row">
            <div class="input-field col s6">
              <label class="active" for="password">*Пароль</label>
              <input id="password" type="password" formControlName="password"
                     [ngClass]="{'invalid' : form.get('password').invalid && form.get('password').touched}"
              >
            </div>
          </div>
          <span class="error" *ngIf="form.get('password').hasError('required') && form.get('password').touched"
          >*Введите пароль
                    </span>
          <span class="error" *ngIf="form.get('password').hasError('minlength') && form.get('password').touched"
          >*Не менее 7 символов
                    </span>
          <span class="error" *ngIf="form.get('password').hasError('maxlength')"
          >*Не более 15 символов
                    </span>

          <div class="row" *ngIf="form.get('password').valid">
            <div class="input-field col s6">
              <label class="active" for="pswConfirm">*Подтверждение пароля</label>
              <input id="pswConfirm" type="password" formControlName="pswConfirm"
                     [ngClass]="{'invalid' : form.get('pswConfirm').invalid && form.get('pswConfirm').touched}"
              >
            </div>
          </div>
          <span class="error" *ngIf="form.get('pswConfirm').hasError('required') && form.get('pswConfirm').touched"
          >*Подтвердите пароль
                    </span>
          <span class="error"
                *ngIf="(form.get('password').value !== form.get('pswConfirm').value) && form.get('pswConfirm').touched"
          >*Пароли не совпадают
                    </span>

          <div class="img-block">
            <label [for]="inputImg">Изображение </label>
            <div class="img-group">
              <span *ngIf="image || form.get('imgSrc').value">Изображение загружено!</span>
              <input type="file" class="dn" formControlName="imgSrc"
                     #inputImg
                     (change)="uploadImg($event)">
              <img (click)=" triggerClick()" [class]="isDelete ? 'dn' : ''"
                   src="../assets/icons/add-photo.png" alt="edit">
            </div>
          </div>
        </div>
      </div>

    </form>
    <div class="btn-group">
      <button
        class="btn-cancel" extended="" mat-fab
        [disabled]="isDelete"
        (click)="openRestaurantsPage()"
      >
        Отмена
      </button>
      <button
        type="submit"
        class="btn-save" extended="" mat-fab
        [disabled]="form.invalid "
        (click)="onSubmit()"
      >
        Сохранить
      </button>
    </div>
  </div>
</div>
